<!DOCTYPE html>
<html lang="en" class="plt-ios ios hydrated">
  <head>
    <meta charset="utf-8" />
    <title>Chatness Vanilla</title>
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <style>
      body,
      html {
        overflow-y: auto !important;
      }
      h2.outer {
        text-align: center;
        margin-top: 50px;
        display: block;
      }
      @media (prefers-color-scheme: dark) {
        h2.outer,
        #powered {
          color: #fff;
        }
      }
    </style>
  </head>
  <body>
    <div>
      <h2 class="outer">Hello <span id="name"></span>!</h2>
      <chat-messages></chat-messages>
    </div>

    <script
      type="text/javascript"
      src="https://static.chatness.app/js/elements.js"
    ></script>

    <script>
      // apply dark theme
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
      uiToggleDark(prefersDark.matches);
      prefersDark.addListener((mediaQuery) => uiToggleDark(mediaQuery.matches));
      function uiToggleDark(shouldAdd) {
        document.body.classList.toggle('dark', shouldAdd);
      }
      document.addEventListener('DOMContentLoaded', function () {
        // declare from and to
        const from = {
          name: 'John Doe',
          objectId: '5EOJTH9nUzM526vKPSVrHzp2zFP2',
          email: 'john@doe.com',
        };

        const to = {
          objectId: '4e1cda1f-4adf-2fce-f303-83f497ce25c9',
          name: 'Developers',
        };

        // set greeting message
        const nameEl = document.querySelector('#name');
        nameEl.innerHTML = from.name;

        // set messages from + to
        const messagesEl = document.querySelector('chat-messages');
        messagesEl.from = from;
        messagesEl.to = to;
      });
    </script>

    <!-- POWERED LABEL -->
    <small id="powered" class="block text-center" style="margin-bottom: 20px"
      >Powered by
      <a href="https://chatness.app?utm_source=vanilla">Chatness</a></small
    >
    <script>
      const source = new URL(location.href).searchParams.get('utm_source');
      const hide = source === 'home';
      if (hide) {
        document.querySelector('#powered').style.display = 'none';
      }
    </script>
    <!-- /POWERED LABEL -->
  </body>
</html>
